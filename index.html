<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Crusade Intel Briefing Generator</title>
  <style>
    :root{
      --bg:#07080b;
      --panel:rgba(255,255,255,0.06);
      --panel2:rgba(255,255,255,0.09);
      --ink:#e9e6dc;
      --muted:#b7b1a2;
      --dim:#7d776b;
      --gold:#d1a14b;
      --red:#cc3b3b;
      --green:#3fbf7f;
      --blue:#4aa6ff;
      --radius:18px;
      --shadow: 0 18px 50px rgba(0,0,0,0.45);
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      color:var(--ink);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(900px 600px at 20% 10%, rgba(74,166,255,0.14), transparent 55%),
        radial-gradient(800px 500px at 80% 30%, rgba(209,161,75,0.10), transparent 55%),
        radial-gradient(900px 700px at 50% 120%, rgba(63,191,127,0.10), transparent 60%),
        linear-gradient(180deg, #07080b, #0b0e14 40%, #07080b);
      display:grid;
      place-items:center;
      padding:24px;
    }

    .wrap{
      width:min(980px, 100%);
      display:grid;
      gap:16px;
    }

    .header{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      padding:18px 20px;
      border:1px solid rgba(255,255,255,0.10);
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .title{
      display:flex;
      flex-direction:column;
      gap:6px;
      min-width: 240px;
    }

    .title h1{
      margin:0;
      font-size:18px;
      letter-spacing:0.16em;
      text-transform:uppercase;
    }

    .title .sub{
      color:var(--muted);
      font-size:13px;
      letter-spacing:0.06em;
      line-height: 1.4;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    button{
      appearance:none;
      border:1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.06);
      color:var(--ink);
      padding:10px 14px;
      border-radius: 14px;
      cursor:pointer;
      font-weight:600;
      letter-spacing:0.04em;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
      user-select:none;
    }

    button:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,0.10);
      border-color: rgba(255,255,255,0.22);
    }

    button.primary{
      border-color: rgba(209,161,75,0.35);
      background: rgba(209,161,75,0.16);
    }

    button.primary:hover{
      background: rgba(209,161,75,0.22);
      border-color: rgba(209,161,75,0.50);
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap:16px;
    }

    @media (max-width: 860px){
      .header{ align-items:flex-start; }
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      padding:18px 20px;
      border:1px solid rgba(255,255,255,0.10);
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }

    .stamp{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-bottom:14px;
    }

    .pill{
      font-size:12px;
      letter-spacing:0.08em;
      text-transform:uppercase;
      color:var(--muted);
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.22);
      padding:6px 10px;
      border-radius: 999px;
      user-select:none;
      white-space:nowrap;
    }

    .pill.gold{ border-color: rgba(209,161,75,0.35); color:#f2e6cf; }
    .pill.red{ border-color: rgba(204,59,59,0.35); color:#ffd6d6; }
    .pill.green{ border-color: rgba(63,191,127,0.35); color:#d9fff0; }
    .pill.blue{ border-color: rgba(74,166,255,0.35); color:#d8efff; }

    .headline{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:12px;
      margin-bottom:8px;
    }

    .headline h2{
      margin:0;
      font-size:22px;
      letter-spacing:0.02em;
    }

    .ref{
      color:var(--dim);
      font-size:12px;
      letter-spacing:0.10em;
      text-transform:uppercase;
      user-select:text;
    }

    .text{
      margin:12px 0 0 0;
      color:var(--ink);
      font-size:15px;
      line-height:1.7;
    }

    .meta{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:14px;
      padding-top:14px;
      border-top:1px solid rgba(255,255,255,0.10);
    }

    .kv{
      padding:10px 12px;
      border:1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.04);
      border-radius: 14px;
      min-height: 64px;
    }

    .k{
      color:var(--muted);
      font-size:12px;
      letter-spacing:0.08em;
      text-transform:uppercase;
    }

    .v{
      margin-top:6px;
      font-weight:650;
    }

    .hint{
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
    }

    .small{
      margin-top:10px;
      color:var(--dim);
      font-size:12px;
      letter-spacing:0.03em;
    }

    textarea{
      width:100%;
      min-height:160px;
      resize:vertical;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.12);
      background: rgba(0,0,0,0.25);
      color: var(--ink);
      padding:12px 12px;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size:12px;
      line-height:1.5;
      outline: none;
    }

    textarea:focus{
      border-color: rgba(74,166,255,0.35);
    }

    .row{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="title">
        <h1>Crusade Intelligence Briefing</h1>
        <div class="sub">One click = one reusable rumor/briefing. True, false, or propaganda.</div>
      </div>
      <div class="actions">
        <button class="primary" id="btnGen" type="button">Generate Briefing</button>
        <button id="btnCopy" type="button">Copy Text</button>
      </div>
    </div>

    <div class="grid">
      <div class="card" aria-live="polite">
        <div class="stamp" id="stamp"></div>

        <div class="headline">
          <h2 id="title">—</h2>
          <div class="ref" id="ref">REF: —</div>
        </div>

        <p class="text" id="body">Click “Generate Briefing” to produce an intel card.</p>

        <div class="meta">
          <div class="kv">
            <div class="k">Subject Faction</div>
            <div class="v" id="subjectFaction">—</div>
          </div>
          <div class="kv">
            <div class="k">Reporting Faction</div>
            <div class="v" id="reportingFaction">—</div>
          </div>

          <div class="kv">
            <div class="k">Source</div>
            <div class="v" id="source">—</div>
          </div>
          <div class="kv">
            <div class="k">Assessment</div>
            <div class="v" id="assessment">—</div>
          </div>
          <div class="kv">
            <div class="k">Recommended Action</div>
            <div class="v" id="action">—</div>
          </div>
          <div class="kv">
            <div class="k">Tag</div>
            <div class="v" id="tag">—</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="hint">
          <strong>Quick tweak (optional):</strong><br/>
          Replace the arrays in the script with your faction names, planet names, or campaign terms.
          The generator is built to drop into any site later.
        </div>

        <div class="small">Export / log (copyable)</div>
        <textarea id="export" readonly></textarea>

        <div class="row">
          <button id="btnGen2" type="button">Generate Another</button>
          <button id="btnCopy2" type="button">Copy Export</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // --- Tiny helpers ---
    const pick = (arr) => arr[Math.floor(Math.random() * arr.length)];
    const id4 = () => Math.random().toString(16).slice(2, 6).toUpperCase();
    const nowCode = () => {
      const d = new Date();
      const y = d.getFullYear();
      const m = String(d.getMonth() + 1).padStart(2, "0");
      const day = String(d.getDate()).padStart(2, "0");
      return `${y}${m}${day}`;
    };

    // --- Data pools (edit these later if you want) ---
    const categories = [
      { name: "Strategic Observations", cls: "blue" },
      { name: "Logistics & Attrition", cls: "gold" },
      { name: "Enemy Activity", cls: "red" },
      { name: "Internal Risks", cls: "green" }
    ];

    const factions = [
      "Adeptus Astartes",
      "Astra Militarum",
      "Adeptus Mechanicus",
      "Chaos Warband",
      "Xenos Incursion",
      "Unknown Renegades",
      "Planetary Defense Force",
      "Inquisition Cell",
      "Merchant Cartel",
      "Civilian Uprising"
    ];

    const confidence = [
      { name: "High", cls: "green" },
      { name: "Moderate", cls: "gold" },
      { name: "Low", cls: "red" }
    ];

    const sources = [
      "Vox-intercept: astropathic static band",
      "Forward picket report (unverified)",
      "Recovered data-slate from a ruined hab-block",
      "Munitorum ledger anomaly (audit flagged)",
      "Civ-pop rumor chain (panic contamination likely)",
      "Survey augur sweep (weather distortion present)",
      "Interrogation transcript (subject unreliable)"
    ];

    const tags = [
      "frontline_shift", "supply_bleed", "false_flag", "warp_anomaly",
      "sabotage_risk", "chain_of_command", "unknown_asset", "civil_unrest",
      "killzone", "signal_spoof"
    ];

    const titles = [
      "Shifting Frontlines",
      "Ghost Supply Lines",
      "Patterned Raids",
      "The Quiet Sector",
      "Mismatch in the Numbers",
      "Signals in the Noise",
      "Familiar Strangers",
      "A Door Left Unlocked",
      "Borrowed Uniforms",
      "The Map is Lying"
    ];

    const bodyA = [
      "Recent engagements suggest the enemy is no longer reacting—they are anticipating. This indicates either improved reconnaissance or compromise of our own routing.",
      "Multiple indicators point to deliberate pressure against our weakest links, not our strongest positions. The intent appears to be exhaustion rather than decisive victory.",
      "Reports are consistent across unrelated channels, which increases credibility. However, the timing is suspiciously convenient and may be engineered.",
      "What looks like routine attrition may be masking a targeted operation. Expect the real strike to occur when attention is elsewhere."
    ];

    const bodyB = [
      "If true, this will not announce itself with a dramatic event—only with small failures that compound: delays, missing crates, late reinforcements, misfiled orders.",
      "Assume at least one familiar face is not who they claim. That does not confirm infiltration; it confirms opportunity.",
      "Do not treat this as a single incident. Treat it as a test: the enemy is probing to see what we ignore.",
      "The safest assumption is that someone wants us to overcommit. Resist the urge to ‘solve’ it with brute force."
    ];

    const assessments = [
      "Credible trend; details uncertain.",
      "Likely true, but incomplete.",
      "Could be propaganda; impact still real.",
      "False report possible; investigate anyway.",
      "Actionable risk. Do not dismiss."
    ];

    const actions = [
      "Increase patrol density in secondary routes; log all deviations.",
      "Audit supply manifests against physical counts; flag repeat discrepancies.",
      "Rotate vox-codes and verify couriers at point-of-contact.",
      "Assign a counterintel sweep; prioritize morale-sensitive units.",
      "Set a bait convoy with overwatch; confirm hostile presence.",
      "Harden comms discipline; move briefings to closed channels only."
    ];

    function renderBriefing() {
      const cat = pick(categories);
      const conf = pick(confidence);
      const ttl = pick(titles);
      const src = pick(sources);
      const tag = pick(tags);
      const assess = pick(assessments);
      const act = pick(actions);

      // Pick factions (allowing match is fine for misinformation; change if you want)
      const subjectFaction = pick(factions);
      const reportingFaction = pick(factions);

      const ref = `BX-${nowCode()}-${id4()}`;
      const body = `${pick(bodyA)} ${pick(bodyB)}`;

      // Stamp pills
      const stamp = document.getElementById("stamp");
      stamp.innerHTML = "";
      const pill = (txt, cls) => {
        const d = document.createElement("div");
        d.className = `pill ${cls || ""}`.trim();
        d.textContent = txt;
        return d;
      };
      stamp.appendChild(pill(cat.name, cat.cls));
      stamp.appendChild(pill(`Confidence: ${conf.name}`, conf.cls));
      stamp.appendChild(pill("Briefing: Field Use", ""));
      stamp.appendChild(pill("Truth Status: Unknown", ""));

      // Main content
      document.getElementById("title").textContent = ttl;
      document.getElementById("ref").textContent = `REF: ${ref}`;
      document.getElementById("body").textContent = body;

      document.getElementById("subjectFaction").textContent = subjectFaction;
      document.getElementById("reportingFaction").textContent = reportingFaction;

      document.getElementById("source").textContent = src;
      document.getElementById("assessment").textContent = assess;
      document.getElementById("action").textContent = act;
      document.getElementById("tag").textContent = tag;

      // Export text
      const exportBox = document.getElementById("export");
      exportBox.value =
`════════════════════════════════════
CRUSADE INTELLIGENCE BRIEFING
════════════════════════════════════

REFERENCE CODE
${ref}

CLASSIFICATION
Field Intelligence — Distribution Authorized

PRIMARY SUBJECT
Faction: ${subjectFaction}

REPORTING AUTHORITY
Faction: ${reportingFaction}

INTELLIGENCE CATEGORY
${cat.name}

CONFIDENCE LEVEL
${conf.name}

SOURCE ORIGIN
${src}

ASSESSMENT
${assess}

RECOMMENDED ACTION
${act}

INTEL TAG
${tag}

════════════════════════════════════
SUMMARY
════════════════════════════════════

${ttl}

${body}

════════════════════════════════════
NOTES
════════════════════════════════════
Truth status remains unverified. This briefing may represent
accurate intelligence, partial truth, deliberate misinformation,
or enemy propaganda. Command discretion is advised.
`;
    }

    async function copyText(text) {
      try {
        await navigator.clipboard.writeText(text);
      } catch (e) {
        // Fallback for restricted clipboard contexts
        const ta = document.createElement("textarea");
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        ta.remove();
      }
    }

    // Wire buttons
    document.getElementById("btnGen").addEventListener("click", renderBriefing);
    document.getElementById("btnGen2").addEventListener("click", renderBriefing);

    document.getElementById("btnCopy").addEventListener("click", () => {
      const t = document.getElementById("export").value || document.getElementById("body").textContent;
      copyText(t);
    });

    document.getElementById("btnCopy2").addEventListener("click", () => {
      copyText(document.getElementById("export").value);
    });

    // Generate one immediately so the page isn't empty
    renderBriefing();
  </script>
</body>
</html>
